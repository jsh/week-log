---
title: squares of odd integers
layout: post
slug: odd-squares
---
Time for a test.
Can I now derive an interesting generating function,
in closed form, without cheating to look?
We shall see.

Here's the power series:

$$1 + 9x + 25x^2 + 49x^3 + ... = g(x)$$

Now to find a closed form.

Let's start with the fundamental identity:

$$f(x) = 1 + x + x^2 + x^3 + ... = \frac{1}{1-x}$$

First, I get a series with the squares, by applying the $(xD)$ operator a couple of times.

$$g(x) = 1 + x + 4x^2 + 9x^3 + 16x^4 + 25x^5 + ... = (xD)^2 f(x) = \frac{x (1+x)}{(1-x)^3}$$

Next, I get rid of the even terms.

$$x + 9x^3 + 25x^5 + 49x^7 + ... = \frac{g(x) - g(-x)}{2} = (1/2)\left( \frac{x (1+x)}{(1-x)^3} - \frac{-x (1-x)}{(1+x)^3} \right) = (1/2)(N/D)$$

A little high-school algebra gives me $N = x ((1+x)^4 + (1-x)^4)$ and $D = (1-x)^3 (1+x)^3 = (1-x^2)^3$ .

Okay, let me simplify the top:

$$N = x( (1 + 4x + 6x^2 + 4x^3 + x^4) + (1 - 4x + 6x^2 - 4x^3 + x^4) ) = x \cdot 2 \cdot (1 + 6x^2 + x^4)$$

Canceling an $x$ on both sides, and letting the $1/2$ cancel the $2$ on the RHS, I have

$$1 + 9x^2 + 25x^4 + 49x^6 + ... = \frac{(1 + 6x^2 + x^4)}{(1-x^2)^3}$$

I'm almost there. Now I just use the substitution $x^2 -> x$.

$$ 1 + 9x + 25x^2 + 49x^3 + ... = \frac{1 + 6x + x^2}{(1-x)^3} = g(x)$$


### But is that right?

Google tells me this is the right answer, but that's not enough for me.
Can I get a closed-form for the coefficients of the power series generated by the RHS?
What is $\[x^n\]g(x)$ ?

First, I'll write the RHS as $g(x) = (1 + 6x + x^2)(1-x)^{-3}$

Next, I'll use the negative binomial.

$(1-x)^{-3} = \sum {-3 \choose k} x^k = \sum {(3+k-1) \choose k} x^k = \sum \frac{(k+2)(k+1)}{2} x^k = h(x)$

I need $\[x^n\] g(x) = \[x^n\] (x^2 + 6x + 1) h(x)$

This is

$\[x^{n-2}\] h(x) + 6\[x^{n-1}\] h(x) + \[x^n\] h(x)$

$$ = (1/2)(n(n-1) + 6n(n+1) + (n+1)(n+2)) = (1/2)(n^2 - n + 6n^2 + 6n + n^2 + 3n + 2) = (1/2)(4n^2 + 4n + 2)$$

$$ = 2n^2 + 2n + 1 = (2n+1)^2$$


### Success!

I just derived, without help, the OGF for the series $\langle 1, 9, 25, 49, ... \rangle$ -- the odd squares --
and then turned right around and showed that the coefficients of that OGF, when expanded, are $a_n = (2n+1)^2$, the odd squares.

I get how to do a lot of basic operations.

